function calculateWeight() {
    const type = document.getElementById('type').value;
    let weight = 0;

    if (type === "rod") {
        const diameter = parseFloat(document.getElementById('diameter').value) / 1000; // mm → m
        const length = parseFloat(document.getElementById('length').value) / 1000;     // mm → m
        if (diameter && length) {
            const radius = diameter / 2;
            const volume = Math.PI * Math.pow(radius, 2) * length;
            weight = volume * densities.rod;
        }
    } else if (type === "tube") {
        const outerDiameter = parseFloat(document.getElementById('outer-diameter').value) / 1000;
        const wallThickness = parseFloat(document.getElementById('wall-thickness').value) / 1000;
        const length = parseFloat(document.getElementById('length-tube').value) / 1000;
        if (outerDiameter && wallThickness && length) {
            const innerDiameter = outerDiameter - 2 * wallThickness;
            const outerRadius = outerDiameter / 2;
            const innerRadius = innerDiameter / 2;
            const volume = Math.PI * (Math.pow(outerRadius, 2) - Math.pow(innerRadius, 2)) * length;
            weight = volume * densities.tube;
        }
    } else if (type === "sheet") {
        const width = parseFloat(document.getElementById('width').value) / 1000;
        const height = parseFloat(document.getElementById('height').value) / 1000;
        const thickness = parseFloat(document.getElementById('thickness').value) / 1000;
        if (width && height && thickness) {
            const area = width * height;
            const volume = area * thickness;
            weight = volume * densities.sheet;
        }
    }

    document.getElementById('weight').textContent = weight.toFixed(2);
}
